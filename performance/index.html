<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Performance - ReJSON Documentation</title>
      
      
      
        <link rel="canonical" href="https://redislabsmodules.github.io/ReJSON/performance/">
      
      
    
    <meta property="og:url" content="https://redislabsmodules.github.io/ReJSON/performance/">
    <meta property="og:title" content="ReJSON Documentation">
    <meta property="og:image" content="https://redislabsmodules.github.io/ReJSON/performance//../">
    <meta name="apple-mobile-web-app-title" content="ReJSON Documentation">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Ubuntu', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
      
      
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
          </span>
        
        Performance
      </div>
    </div>
    
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="https://github.com/RedisLabsModules/ReJSON" class="project">
    <div class="banner">
      
      <div class="name">
        <strong>
          ReJSON Documentation
          <span class="version">
            
          </span>
        </strong>
        
          <br>
          RedisLabsModules/ReJSON
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
        <ul class="repo">
          <li class="repo-download">
            
            <a href="https://github.com/RedisLabsModules/ReJSON/archive/master.zip" target="_blank" title="Download" data-action="download">
              <i class="icon icon-download"></i> Download
            </a>
          </li>
          <li class="repo-stars">
            <a href="https://github.com/RedisLabsModules/ReJSON/stargazers" target="_blank" title="Stargazers" data-action="star">
              <i class="icon icon-star"></i> Stars
              <span class="count">&ndash;</span>
            </a>
          </li>
        </ul>
        <hr>
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Quickstart" href="..">
      Quickstart
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Commands" href="../commands/">
      Commands
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Path syntax" href="../path/">
      Path syntax
    </a>
    
  </li>

          
            
  <li>
    <a class="current" title="Performance" href="./">
      Performance
    </a>
    
      
        
      
      
        <ul>
          
            <li class="anchor">
              <a title="An smallish object" href="#an-smallish-object">
                An smallish object
              </a>
            </li>
          
            <li class="anchor">
              <a title="A bigger array" href="#a-bigger-array">
                A bigger array
              </a>
            </li>
          
            <li class="anchor">
              <a title="A largish object" href="#a-largish-object">
                A largish object
              </a>
            </li>
          
            <li class="anchor">
              <a title="Number operations" href="#number-operations">
                Number operations
              </a>
            </li>
          
            <li class="anchor">
              <a title="Baseline" href="#baseline">
                Baseline
              </a>
            </li>
          
            <li class="anchor">
              <a title="The empty string" href="#the-empty-string">
                The empty string
              </a>
            </li>
          
            <li class="anchor">
              <a title="Raw results" href="#raw-results">
                Raw results
              </a>
            </li>
          
        </ul>
      
    
  </li>

          
            
  <li>
    <a class="" title="RAM usage" href="../ram/">
      RAM usage
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Developer notes" href="../developer/">
      Developer notes
    </a>
    
  </li>

          
        </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
          <h1 id="performance">Performance</h1>
<p>To get an early sense of what ReJSON is capable of, you can test it with <code>redis-benchmark</code> just like
any other Redis command. However, in order to have more control over the tests, we'll be using a 
a tool written in Go called <em>ReJSONBenchmark</em> that we expect to release in the near future.</p>
<p>The following figures were obtained from an AWS EC2 c4.8xlarge instance that ran both the Redis
server as well the as the benchmarking tool. Connections to the server are via the networking stack.
All tests are non-pipelined.</p>
<blockquote>
<p>NOTE: the results below are measured using the preview version of ReJSON, which is still very much
unoptimized :)</p>
</blockquote>
<h2 id="an-smallish-object">An smallish object</h2>
<p>We test a JSON value that, while purely synthetic, is interesting. The test subject is
<a href="../test/files/pass-100.json">/test/files/pass-100.json</a>, who weighs in at 380 bytes and is nested.
We first test SETting it, then GETting it using several different paths:</p>
<p><img alt="ReJSONBenchmark pass-100.json" src="../images/bench_pass_100.png" /></p>
<p><img alt="ReJSONBenchmark pass-100.json percentiles" src="../images/bench_pass_100_p.png" /></p>
<h2 id="a-bigger-array">A bigger array</h2>
<p>Moving on to bigger values, we use the 1.4 kB array in
<a href="../test/files/pass-jsonsl-1.json">/test/files/pass-jsonsl-1.json</a>:</p>
<p><img alt="ReJSONBenchmark pass-jsonsl-1.json" src="../images/bench_pass_jsonsl_1.png" /></p>
<p><img alt="ReJSONBenchmark pass-jsonsl-1.json percentiles" src="../images/bench_pass_jsonsl_1_p.png" /></p>
<h2 id="a-largish-object">A largish object</h2>
<p>More of the same to wrap up, now we'll take on a behemoth of no less than 3.5 kB as given by
<a href="../test/files/pass-json-parser-0000.json">/test/files/pass-json-parser-0000.json</a>:</p>
<p><img alt="ReJSONBenchmark pass-json-parser-0000.json" src="../images/bench_pass_json_parser_0000.png" /></p>
<p><img alt="ReJSONBenchmark pass-json-parser-0000.json percentiles" src="../images/bench_pass_json_parser_0000_p.png" /></p>
<h2 id="number-operations">Number operations</h2>
<p>Last but not least, some adding and multiplying:</p>
<p><img alt="ReJSONBenchmark number operations" src="../images/bench_numbers.png" /></p>
<p><img alt="ReJSONBenchmark number operations percentiles" src="../images/bench_numbers_p.png" /></p>
<h2 id="baseline">Baseline</h2>
<p>To establish a baseline we'll use the Redis <a href="https://redis.io/commands/ping"><code>PING</code></a> command.
First, lets see what <code>redis-benchmark</code> reports:</p>
<pre><code>~$ redis/src/redis-benchmark -n 1000000 ping
====== ping ======
  1000000 requests completed in 7.11 seconds
  50 parallel clients
  3 bytes payload
  keep alive: 1

99.99% &lt;= 1 milliseconds
100.00% &lt;= 1 milliseconds
140587.66 requests per second
</code></pre>

<p>ReJSONBenchmark's concurrency is configurable, so we'll test a few settings to find a good one. Here
are the results, which indicate that 16 workers yield the best throughput:</p>
<p><img alt="ReJSONBenchmark PING" src="../images/bench_ping.png" /></p>
<p><img alt="ReJSONBenchmark PING percentiles" src="../images/bench_ping_p.png" /></p>
<p>Note how our benchmarking tool does slightly worse in PINGing producing only 116K ops, compared to
<code>redis-cli</code>'s 140K.</p>
<h2 id="the-empty-string">The empty string</h2>
<p>Another ReJSON benchmark is that of setting and getting an empty string - a value that's only two
bytes long (i.e. <code>""</code>). Granted, that's not very useful, but it teaches us something about the basic
performance of the module:</p>
<p><img alt="ReJSONBenchmark empty string" src="../images/bench_empty_string.png" /></p>
<p><img alt="ReJSONBenchmark empty string percentiles" src="../images/bench_empty_string_p.png" /></p>
<h2 id="raw-results">Raw results</h2>
<p>The following are the raw results from the benchmark in CSV format:</p>
<pre><code>title,concurrency,rate,average latency,50.00%-tile,90.00%-tile,95.00%-tile,99.00%-tile,99.50%-tile,100.00%-tile
[ping],1,22128.12,0.04,0.04,0.04,0.05,0.05,0.05,1.83
[ping],2,54641.13,0.04,0.03,0.05,0.05,0.06,0.07,2.14
[ping],4,76000.18,0.05,0.05,0.07,0.07,0.09,0.10,2.10
[ping],8,106750.99,0.07,0.07,0.10,0.11,0.14,0.16,2.99
[ping],12,111297.33,0.11,0.10,0.15,0.16,0.20,0.22,6.81
[ping],16,116292.19,0.14,0.13,0.19,0.21,0.27,0.33,7.50
[ping],20,110622.82,0.18,0.17,0.24,0.27,0.38,0.47,12.21
[ping],24,107468.51,0.22,0.20,0.31,0.38,0.58,0.71,13.86
[ping],28,102827.35,0.27,0.25,0.38,0.44,0.66,0.79,12.87
[ping],32,105733.51,0.30,0.28,0.42,0.50,0.79,0.97,10.56
[ping],36,102046.43,0.35,0.33,0.48,0.56,0.90,1.13,14.66
JSON.SET {key} . {empty string size: 2 B},16,80276.63,0.20,0.18,0.28,0.32,0.41,0.45,6.48
JSON.GET {key} .,16,92191.23,0.17,0.16,0.24,0.27,0.34,0.38,9.80
JSON.SET {key} . {pass-100.json size: 380 B},16,41512.77,0.38,0.35,0.50,0.62,0.81,0.86,9.56
JSON.GET {key} .,16,48374.10,0.33,0.29,0.47,0.56,0.72,0.79,9.36
JSON.GET {key} sclr,16,94801.23,0.17,0.15,0.24,0.27,0.35,0.39,13.21
JSON.GET {key} sub_doc,16,81633.51,0.19,0.18,0.27,0.32,0.43,0.49,9.88
JSON.GET {key} sub_doc.sclr,16,95052.35,0.17,0.15,0.24,0.27,0.35,0.39,7.39
JSON.GET {key} array_of_docs,16,68223.05,0.23,0.22,0.29,0.31,0.44,0.50,8.84
JSON.GET {key} array_of_docs[1],16,76390.57,0.21,0.19,0.30,0.34,0.44,0.49,9.99
JSON.GET {key} array_of_docs[1].sclr,16,90202.13,0.18,0.16,0.25,0.29,0.36,0.39,7.87
JSON.SET {key} . {pass-jsonsl-1.json size: 1.4 kB},16,16117.11,0.99,0.91,1.22,1.55,2.17,2.35,9.27
JSON.GET {key} .,16,15193.51,1.05,0.94,1.41,1.75,2.33,2.42,7.19
JSON.GET {key} [0],16,78198.90,0.20,0.19,0.29,0.33,0.42,0.47,10.87
JSON.GET {key} [7],16,99013.98,0.16,0.15,0.23,0.26,0.34,0.38,7.67
JSON.GET {key} [8].zero,16,90562.19,0.17,0.16,0.25,0.28,0.35,0.38,7.03
JSON.SET {key} . {pass-json-parser-0000.json size: 3.5 kB},16,14239.25,1.12,1.06,1.21,1.48,2.35,2.59,11.91
JSON.GET {key} .,16,8366.31,1.91,1.86,2.00,2.04,2.92,3.51,12.92
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet&quot;,16,9339.90,1.71,1.68,1.74,1.78,2.68,3.26,10.47
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet[0]&quot;,16,13374.88,1.19,1.07,1.54,1.95,2.69,2.82,12.15
&quot;JSON.GET {key} [&quot;&quot;web-app&quot;&quot;].servlet[0][&quot;&quot;servlet-name&quot;&quot;]&quot;,16,81267.36,0.20,0.18,0.28,0.31,0.38,0.42,9.67
[JSON.SET num . 0],16,84498.21,0.19,0.17,0.26,0.30,0.39,0.43,8.08
[JSON.NUMINCRBY num . 1],16,78640.20,0.20,0.18,0.28,0.33,0.44,0.48,11.05
[JSON.NUMMULTBY num . 2],16,77170.85,0.21,0.19,0.28,0.33,0.43,0.47,6.85
</code></pre>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../path/" title="Path syntax">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Path syntax
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../ram/" title="RAM usage">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                RAM usage
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = 'RedisLabsModules/ReJSON';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
      <script>
        (function(i,s,o,g,r,a,m){
          i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||
          []).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;
          m.parentNode.insertBefore(a,m)
        })(window, document,
          'script', 'https://www.google-analytics.com/analytics.js', 'ga');
        /* General initialization */
        ga('create', 'UA-89559992-1', 'rejson');
        ga('set', 'anonymizeIp', true);
        ga('send', 'pageview');
        /* Track outbound links */
        var buttons = document.querySelectorAll('a');
        Array.prototype.map.call(buttons, function(item) {
          if (item.host != document.location.host) {
            item.addEventListener('click', function() {
              var action = item.getAttribute('data-action') || 'follow';
              ga('send', 'event', 'outbound', action, item.href);
            });
          }
        });
        /* Register handler to log search on blur */
        var query = document.querySelector('.query');
        query.addEventListener('blur', function() {
          if (this.value) {
            var path = document.location.pathname;
            ga('send', 'pageview', path + '?q=' + this.value);
          }
        });
      </script>
    
  </body>
</html>